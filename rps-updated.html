<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Rock Paper Scissors</title>
        <h1>Rock Paper Scissors</h1>
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <div class="score">
            <p>Score: 0 - 0 </p>
        </div>
        <div class="buttons">
            <div class="playerButtons">
                <button id='rock'></button>
                <button id='paper'></button>
                <button id='scissors'></button>
            </div>
            <div class="compButtons">
                <button id='compRock'></button>
                <button id='compPaper'></button>
                <button id='compScissors'></button>
            </div>
        </div>
        <div class="log"></div>
        
    </body>
</html>

<script>
    //Main Code
    let playerScore = 0;
    let computerScore = 0;
    let p = document.querySelector('p');
    let logP = document.createElement('p');
    const button = document.querySelector('.buttons');
    const body = document.querySelector('body');
    const playContainer = document.createElement('div');
    playContainer.setAttribute('id', "playContainer");
    const playButton = document.createElement('button');
    playButton.setAttribute('id', 'playButton');
    const log = document.querySelector('.log');
    button.addEventListener('click', playRound);
    playButton.addEventListener('click', resetGame);

    //Functions
    function playRound(e) {
        let playerSelection = e.target.id.toLowerCase();
        let computerSelection = computerPlay().toLowerCase();
        console.log(playerSelection);
        
        if (playerScore < 5 && computerScore < 5) {
            let result = playRps(playerSelection, computerSelection);
            p.textContent = `Score: ${playerScore} - ${computerScore}`;
            logP.textContent = result;
            log.appendChild(logP);
            if (playerScore == 5 || computerScore == 5) {
                if (playerScore == 5) {
                    let winP = document.createElement('p');
                    winP.textContent = `Congratulations Player! You are the winner!`;
                    p.appendChild(winP);
                }
                if (computerScore == 5) {
                    let winP = document.createElement('p');
                    winP.textContent = `So sorry! The Computer has defeated you this time! Try again!`;
                    p.appendChild(winP);
                }
                
                body.appendChild(playContainer);
                playButton.textContent = "Play Again?";
                playContainer.appendChild(playButton);

            }
        } else {
            return;
        } 
    }

    function resetGame(e) {
        playerScore = 0;
                computerScore = 0;
                p.textContent = `Score: ${playerScore} - ${computerScore}`;
                playContainer.removeChild(playButton);
                log.removeChild(logP);
    }
    function computerPlay() {
            let rpsSelect = Math.floor(Math.random() * Math.floor(3));
            if (rpsSelect == 0) {
                return "Rock";
            }
            else if (rpsSelect == 1) {
                return "Paper";
            }
            else {
                return "Scissors";
            }
    }

    function playRps(playerSelection, computerSelection) {
            let playerSelect = playerSelection.toLowerCase();
            let computerSelect = computerSelection.toLowerCase();
            while (playerSelect == 'rock') {
                if (playerSelect == computerSelect) {
                    return "You tied!";
                }
                else if (computerSelect == 'paper') {
                    computerScore += 1;
                    return "You Lose! Paper wraps Rock";
                }
                else {
                    playerScore += 1;
                    return "You Win! Rock smashes Scissors";
                }
            }
            while (playerSelect == 'paper') {
                if (playerSelect == computerSelect) {
                    return "You tied!";
                }
                else if (computerSelect == 'scissors') {
                    computerScore += 1;
                    return "You Lose! Scissors cuts Paper";
                }
                else {
                    playerScore += 1;
                    return "You Win! Paper wraps Rock";
                }
            }
            while (playerSelect == 'scissors') {
                if (playerSelect == computerSelect) {
                    return "You tied!";
                }
                else if (computerSelect == 'rock') {
                    computerScore += 1;
                    return "You Lose! Rock smashes Scissors";
                }
                else {
                    playerScore += 1;
                    return "You Win! Scissors cuts Paper";
                }
            }
    }
</script>